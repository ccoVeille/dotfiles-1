#!sh

xhost +"SI:localuser:$USER" &

# set up session keyring

if have keyctl; then
	if [ "`keyctl rdescribe @s`" = "`keyctl rdescribe @us`" ]; then
		keyctl show
		echo "Creating new session keyring"
		keyctl new_session
		keyctl show
		echo "Linking user keyring"
		keyctl link @u @s
		keyctl show
	fi
fi

# load SSH keys & other credentials

have auca-seed &&
	auca-seed &

# load X settings

[ -f ~/.config/synclient.conf ] &&
	synclient `grep -v "^#" ~/.config/synclient.conf` &

# run startup programs

[ "$MPD_HOST" ] &&
	have mpdscribble && spawn -L mpdscribble

# end

true
