#!/usr/bin/env bash
set -e

dir=~/.dotfiles
all=false
force=false

while getopts af OPT; do
	case $OPT in
	a)	all=true;;
	f)	force=true;;
	esac
done

link() {
	local target="$dir/${1%/}" link=$2
	if [ -e "$link" ] && [ ! -h "$link" ] && ! $force; then
		echo "Not overwriting $link" >&2
	else
		rm -f "$link"
		sym -vf "$target" "$link"
	fi
}
sym() {
	~/code/sym.pl "$@"
}

link	bashrc		~/.bashrc
link	gitconfig	~/.gitconfig
link	gitignore	~/.gitignore
link	profile		~/.profile
link	vimrc		~/.vimrc
$all || exit 0

link	mailrc		~/.mailrc
link	muttrc		~/.muttrc
link	screenrc	~/.screenrc
link	tmux.conf	~/.tmux.conf
link	vim/		~/.vim
